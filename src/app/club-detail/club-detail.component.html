<div class="loading" *ngIf="loading">
  Loading club details...
</div>

<div class="error" *ngIf="error">
  {{ error }}
</div>

<div class="club-detail-container" *ngIf="club && !loading && !error">
  <button class="back-button" (click)="goBack()">‚Üê Back to Standings</button>
  
  <!-- Season Selector -->
  <div class="season-selector" *ngIf="seasons.length > 0 && cachedClubSeasons.length > 0">
    <label for="seasonSelect">View Season:</label>
    <select id="seasonSelect" 
            [(ngModel)]="selectedSeasonId"
            (ngModelChange)="onSeasonChange($event)">
        <option *ngFor="let season of cachedClubSeasons" [value]="season._id">
        {{ season.name }}
      </option>
    </select>
  </div>
  
  <app-club-header 
    [club]="club" 
    [selectedSeasonDivision]="getSelectedSeasonDivision()">
  </app-club-header>

  <app-club-stats-grid [club]="club"></app-club-stats-grid>

  <!-- Banner Ads (side-by-side on desktop) -->
  <div class="my-5">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
      <app-adsense [config]="bannerAdConfig2"></app-adsense>
      <app-adsense [config]="bannerAdConfig2"></app-adsense>
    </div>
  </div>

  <!-- Add a loading state -->
  <div class="loading-stats" *ngIf="isProcessingStats">
    Calculating team statistics...
  </div>

  <app-club-roster-tables 
    *ngIf="!isProcessingStats"
    [signedPlayers]="signedPlayers"
    [skaterStats]="skaterStats"
    [goalieStats]="goalieStats"
    [selectedSeasonId]="selectedSeasonId">
  </app-club-roster-tables>
  
  <!-- Playoff Statistics Section (Separate Tables) -->
  <div *ngIf="playoffClubMatches.length > 0 && (playoffSkaterStats.length > 0 || playoffGoalieStats.length > 0)" class="mt-8">
    <h2 class="text-2xl font-bold text-white mb-4 border-b border-gray-700 pb-2">Playoff Statistics</h2>
    <p class="text-gray-400 text-sm mb-4">Statistics from playoff games only. Regular season stats are shown above.</p>
    
    <app-club-roster-tables 
      [signedPlayers]="signedPlayers"
      [skaterStats]="playoffSkaterStats"
      [goalieStats]="playoffGoalieStats"
      [selectedSeasonId]="selectedSeasonId">
    </app-club-roster-tables>
  </div>
  
  <!-- Footer Ad -->
  <app-footer-ad></app-footer-ad>
  
  <!-- Match History Component -->
  <app-match-history [matches]="clubMatches" [teamName]="club.clubName"></app-match-history>
  
  <app-club-stat-legend></app-club-stat-legend>
</div>
