<!-- navigation.component.html -->
<nav class="bg-gray-800 shadow-lg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
            <div class="flex items-center flex-shrink-0">
                <a class="flex items-center font-bold" routerLink="/home">
                    <img src="assets/images/1ithlwords.png" alt="League Logo" class="h-8 w-auto mr-2 min-w-0">
                </a>
                <!-- Social Media Links -->
                <div class="hidden md:flex items-center space-x-3 ml-4 flex-shrink-0">
                    <a href="https://discord.gg/2JyJ4MQCHG" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors" 
                       aria-label="Discord">
                        <i class="fab fa-discord text-xl"></i>
                    </a>
                    <a href="https://x.com/IceTiltHL" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors" 
                       aria-label="Twitter/X">
                        <i class="fab fa-x-twitter text-xl"></i>
                    </a>
                    <a href="https://www.instagram.com/icetilthl/" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors" 
                       aria-label="Instagram">
                        <i class="fab fa-instagram text-xl"></i>
                    </a>
                    <a href="https://www.youtube.com/@icetilthl" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors" 
                       aria-label="YouTube">
                        <i class="fab fa-youtube text-xl"></i>
                    </a>
                    <a href="https://www.tiktok.com/@icetilthl" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors inline-flex items-center justify-center w-6 h-6" 
                       aria-label="TikTok">
                        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                          <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
                        </svg>
                    </a>
                </div>
            </div>
            
            <!-- Desktop Navigation -->
            <div class="hidden xl:flex items-center space-x-6">
                <!-- League Dropdown -->
                <div class="relative">
                    <button (click)="toggleLeagueDropdown()" class="text-gray-300 hover:text-white px-2 py-2 rounded-md text-sm font-medium transition-colors flex items-center">
                        League
                        <svg class="ml-1 h-4 w-4 transition-transform" [class.rotate-180]="isLeagueDropdownOpen" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div *ngIf="isLeagueDropdownOpen" class="absolute left-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 z-50 border border-gray-700" (click)="$event.stopPropagation()">
                        <a class="text-gray-300 hover:bg-gray-700 hover:text-white block px-4 py-2 text-sm transition-colors" routerLink="/schedule" (click)="closeLeagueDropdown()">Schedule</a>
                        <a class="text-gray-300 hover:bg-gray-700 hover:text-white block px-4 py-2 text-sm transition-colors" routerLink="/standings" (click)="closeLeagueDropdown()">Standings</a>
                        <a class="text-gray-300 hover:bg-gray-700 hover:text-white block px-4 py-2 text-sm transition-colors" routerLink="/player-stats" (click)="closeLeagueDropdown()">Player Stats</a>
                        <a class="text-gray-300 hover:bg-gray-700 hover:text-white block px-4 py-2 text-sm transition-colors" routerLink="/goalie-stats" (click)="closeLeagueDropdown()">Goalie Stats</a>
                        <a class="text-gray-300 hover:bg-gray-700 hover:text-white block px-4 py-2 text-sm transition-colors" routerLink="/transactions" (click)="closeLeagueDropdown()">Transactions</a>
                    </div>
                </div>
                
                <a class="text-gray-300 hover:text-white px-2 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/rankings">Rankings</a>
                <a class="text-gray-300 hover:text-white px-2 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/playoffs">Playoffs</a>
                <a class="text-gray-300 hover:text-white px-2 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/tournaments">Tournaments</a>
                <a class="text-gray-300 hover:text-white px-2 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/clubs">Clubs</a>
                <a class="text-gray-300 hover:text-white px-2 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/articles">Articles</a>
                <a class="text-gray-300 hover:text-white px-2 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/about">About</a>
                <!-- TODO: Manager feature temporarily disabled -->
                <!-- <a class="text-gray-300 hover:text-white px-2 py-2 rounded-md text-sm font-medium transition-colors" *ngIf="(isManager$ | async) || (isAdmin$ | async)" routerLink="/manager-view">Manager View</a> -->
                <a class="text-gray-300 hover:text-white px-2 py-2 rounded-md text-sm font-medium transition-colors" *ngIf="isAdmin$ | async" routerLink="/admin">Admin Panel</a>
            </div>

            <!-- Right Aligned Auth Section -->
            <div class="flex items-center">
                <ng-container *ngIf="!(auth.isLoading$ | async); else authLoading">
                    <app-user-profile *ngIf="(auth.isAuthenticated$ | async) && (isInAdminPanel$ | async) && (adminPasswordService.isAdminPasswordVerified$ | async)"></app-user-profile>
                    <app-auth-button *ngIf="!(auth.isAuthenticated$ | async) && (shouldShowLoginButton$ | async)" class="hidden"></app-auth-button>
                </ng-container>
                <ng-template #authLoading>
                    <!-- Optional: placeholder/spinner -->
                </ng-template>
            </div>

            <!-- Mobile menu button -->
            <div class="xl:hidden flex items-center ml-2">
                <button type="button" (click)="toggleMenu()" class="text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white p-2 rounded-md" [attr.aria-expanded]="!isMenuCollapsed" aria-label="Toggle navigation">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile Navigation Menu -->
        <div class="xl:hidden" [class.hidden]="isMenuCollapsed">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-gray-800">
                <!-- Mobile Navigation Links -->
                <!-- League Section -->
                <div class="border-b border-gray-700 pb-2 mb-2">
                    <button (click)="toggleLeagueDropdown()" class="text-gray-300 hover:text-white w-full text-left px-3 py-2 rounded-md text-base font-medium transition-colors flex items-center justify-between">
                        <span>League</span>
                        <svg class="h-4 w-4" [class.rotate-180]="isLeagueDropdownOpen" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div *ngIf="isLeagueDropdownOpen" class="pl-4 mt-1 space-y-1">
                        <a class="text-gray-400 hover:text-white block px-3 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/schedule" (click)="closeLeagueDropdown(); isMenuCollapsed = true">Schedule</a>
                        <a class="text-gray-400 hover:text-white block px-3 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/standings" (click)="closeLeagueDropdown(); isMenuCollapsed = true">Standings</a>
                        <a class="text-gray-400 hover:text-white block px-3 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/player-stats" (click)="closeLeagueDropdown(); isMenuCollapsed = true">Player Stats</a>
                        <a class="text-gray-400 hover:text-white block px-3 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/goalie-stats" (click)="closeLeagueDropdown(); isMenuCollapsed = true">Goalie Stats</a>
                        <a class="text-gray-400 hover:text-white block px-3 py-2 rounded-md text-sm font-medium transition-colors" routerLink="/transactions" (click)="closeLeagueDropdown(); isMenuCollapsed = true">Transactions</a>
                    </div>
                </div>
                
                <a class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors" routerLink="/rankings">Rankings</a>
                <a class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors" routerLink="/playoffs">Playoffs</a>
                <a class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors" routerLink="/tournaments">Tournaments</a>
                <a class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors" routerLink="/clubs">Clubs</a>
                <a class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors" routerLink="/articles">Articles</a>
                <a class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors" routerLink="/about">About</a>
                <!-- TODO: Manager feature temporarily disabled -->
                <!-- <a class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors" *ngIf="(isManager$ | async) || (isAdmin$ | async)" routerLink="/manager-view">Manager View</a> -->
                <a class="text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium transition-colors" *ngIf="isAdmin$ | async" routerLink="/admin">Admin Panel</a>
                
                <!-- Mobile Social Media Links -->
                <div class="pt-2 border-t border-gray-700 flex items-center justify-center space-x-4 py-3">
                    <a href="https://discord.gg/2JyJ4MQCHG" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors" 
                       aria-label="Discord">
                        <i class="fab fa-discord text-2xl"></i>
                    </a>
                    <a href="https://x.com/IceTiltHL" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors" 
                       aria-label="Twitter/X">
                        <i class="fab fa-x-twitter text-2xl"></i>
                    </a>
                    <a href="https://www.instagram.com/icetilthl/" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors" 
                       aria-label="Instagram">
                        <i class="fab fa-instagram text-2xl"></i>
                    </a>
                    <a href="https://www.youtube.com/@icetilthl" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors" 
                       aria-label="YouTube">
                        <i class="fab fa-youtube text-2xl"></i>
                    </a>
                    <a href="https://www.tiktok.com/@icetilthl" target="_blank" rel="noopener noreferrer" 
                       class="text-gray-400 hover:text-white transition-colors inline-flex items-center justify-center" 
                       aria-label="TikTok">
                        <svg class="w-7 h-7" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                          <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
                        </svg>
                    </a>
                </div>
                
                <!-- Mobile Auth Section -->
                <div class="pt-2 border-t border-gray-700">
                    <app-user-profile *ngIf="(auth.isAuthenticated$ | async) && (isInAdminPanel$ | async) && (adminPasswordService.isAdminPasswordVerified$ | async)"></app-user-profile>
                    <app-auth-button *ngIf="!(auth.isAuthenticated$ | async) && (shouldShowLoginButton$ | async)" class="hidden"></app-auth-button>
                </div>
            </div>
        </div>
    </div>
</nav>

