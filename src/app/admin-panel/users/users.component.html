<div class="max-w-4xl mx-auto p-6">
  <h2 class="text-3xl font-bold text-blue-300 mb-6">Users Management</h2>
  
  <div *ngIf="loading" class="text-center text-white py-10 text-xl">Loading users...</div>
  <div *ngIf="error" class="text-center text-red-500 py-5 text-lg bg-red-500/10 border border-red-500 rounded-lg my-5">{{ error }}</div>
  
  <div *ngIf="!loading && !error" class="space-y-4">
    <div class="bg-admin-card rounded-lg p-6 shadow-lg" *ngFor="let user of users">
      <div class="flex justify-between items-center">
        <div class="text-white font-medium">{{ user.discordUsername || user.discordId }}</div>
        <button 
          class="px-4 py-2 bg-admin-secondary text-white rounded-md hover:bg-blue-700 transition-colors"
          (click)="editUser(user)"
        >
          Edit
        </button>
      </div>
    </div>
  </div>

  <!-- Edit User Modal -->
  <div *ngIf="editingUser" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-admin-card rounded-lg p-6 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto">
      <h3 class="text-xl font-semibold text-white mb-4">Edit User</h3>
      <form (ngSubmit)="saveUser()" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">Discord Username</label>
            <input 
              [(ngModel)]="editingUser.discordUsername" 
              name="discordUsername"
              class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
            >
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">Email</label>
            <input 
              [(ngModel)]="editingUser.email" 
              name="email"
              class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
            >
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">Platform</label>
            <input 
              [(ngModel)]="editingUser.platform" 
              name="platform"
              class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
            >
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">Gamertag</label>
            <input 
              [(ngModel)]="editingUser.gamertag" 
              name="gamertag"
              class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
            >
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">Role</label>
            <input 
              [(ngModel)]="editingUser.role" 
              name="role"
              class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
            >
          </div>
        </div>
        
        <div *ngIf="editingUser.playerProfile" class="border-t border-admin-accent pt-4">
          <h4 class="text-lg font-semibold text-admin-primary mb-3">Player Profile</h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2">Position</label>
              <input 
                [(ngModel)]="editingUser.playerProfile.position" 
                name="position"
                class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
              >
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2">Handedness</label>
              <input 
                [(ngModel)]="editingUser.playerProfile.handedness" 
                name="handedness"
                class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
              >
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2">Location</label>
              <input 
                [(ngModel)]="editingUser.playerProfile.location" 
                name="location"
                class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
              >
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2">Region</label>
              <input 
                [(ngModel)]="editingUser.playerProfile.region" 
                name="region"
                class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
              >
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-300 mb-2">Status</label>
              <input 
                [(ngModel)]="editingUser.playerProfile.status" 
                name="status"
                class="w-full px-3 py-2 bg-admin-hover border border-admin-accent rounded-md text-white focus:outline-none focus:border-admin-primary"
              >
            </div>
          </div>
        </div>
        <div class="flex gap-3 pt-4">
          <button 
            type="submit" 
            class="px-4 py-2 bg-admin-secondary text-white rounded-md hover:bg-blue-700 transition-colors"
          >
            Save
          </button>
          <button 
            type="button" 
            (click)="cancelEdit()"
            class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div> 