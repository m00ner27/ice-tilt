<section class="free-agents mt-4">
    <div class="container">
        <!-- Loading State -->
        <div *ngIf="loading$ | async" class="loading-spinner">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <!-- Error State -->
        <div *ngIf="error$ | async as error" class="alert alert-danger">
            {{ error }}
        </div>

        <!-- Free Agents List -->
        <ng-container *ngIf="freeAgents$ | async as agents">
            <div class="table-responsive">
                <table class="table table-bordered table-hover free-agents-table">
                    <thead class="table-dark">
                        <tr>
                            <th>Player</th>
                            <th>Position</th>
                            <th>Last Team</th>
                            <th>Date Available</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let agent of agents">
                            <td class="player-cell">
                                <img [src]="agent.profilePic" [alt]="agent.playerName" class="player-pic me-2">
                                {{ agent.playerName }}
                            </td>
                            <td>{{ agent.position }}</td>
                            <td>
                                <img *ngIf="agent.lastClubId" 
                                     [src]="agent.teamLogo" 
                                     [alt]="agent.lastClubId" 
                                     class="team-logo me-2">
                                {{ agent.teamName }}
                            </td>
                            <td>{{ agent.dateAvailable | date }}</td>
                            <td>
                                <span [class.badge]="true"
                                      [class.bg-success]="agent.status === 'AVAILABLE'"
                                      [class.bg-warning]="agent.status === 'PENDING_SIGNING'">
                                    {{ agent.status }}
                                </span>
                            </td>
                            <td>
                                <button class="btn btn-primary btn-sm"
                                        *ngIf="agent.status === 'AVAILABLE'"
                                        (click)="onSignPlayer(agent.playerId, 'your-team-id')">
                                    Sign Player
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </ng-container>
    </div>
</section>
