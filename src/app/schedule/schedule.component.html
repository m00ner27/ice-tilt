<div class="text-white" [class.p-3]="!isPreview" [class.sm:p-5]="!isPreview" [class.max-w-7xl]="!isPreview" [class.mx-auto]="!isPreview" [class.transactions-section]="isPreview">
  <div [class.container]="isPreview">
    <h1 *ngIf="!isPreview" class="text-center mb-5 text-4xl font-bold">Game Schedule</h1>
  
  <!-- Filter options -->
  <div *ngIf="!isPreview" class="mb-5 flex flex-wrap justify-start gap-4">
    <div class="flex items-center gap-2">
      <label for="seasonFilter" class="font-medium whitespace-nowrap">Filter by Season:</label>
      <select 
        id="seasonFilter" 
        [(ngModel)]="filterSeason" 
        (change)="onSeasonFilterChange(filterSeason)" 
        class="px-3 py-2 rounded-md bg-admin-card text-white min-w-40 appearance-none cursor-pointer"
        style="background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'white\'%3e%3cpath d=\'M7 10l5 5 5-5z\'/%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 12px center; padding-right: 40px;"
      >
        <option value="">All Seasons</option>
        <option *ngFor="let season of seasons" [value]="season._id">{{ season.name }}</option>
      </select>
    </div>
    
    <div class="flex items-center gap-2">
      <label for="teamFilter" class="font-medium whitespace-nowrap">Filter by Club:</label>
      <select 
        id="teamFilter" 
        [(ngModel)]="filterTeam" 
        (change)="onTeamFilterChange(filterTeam)" 
        class="px-3 py-2 rounded-md bg-admin-card text-white min-w-40 appearance-none cursor-pointer"
        style="background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'white\'%3e%3cpath d=\'M7 10l5 5 5-5z\'/%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 12px center; padding-right: 40px;"
      >
        <option value="">All Clubs</option>
        <option *ngFor="let team of teamOptions" [value]="team">{{ team }}</option>
      </select>
    </div>
    
    <div class="flex items-center">
      <button 
        (click)="clearAllFilters()" 
        class="px-4 py-2 rounded-md bg-red-600 text-white cursor-pointer font-medium transition-all duration-300 hover:bg-red-700 hover:-translate-y-0.5 hover:shadow-lg active:translate-y-0 active:shadow-md"
        type="button"
      >
        Clear All Filters
      </button>
    </div>
  </div>
  
  <!-- Loading state -->
  <div *ngIf="matchesLoading$ | async" class="text-center text-white py-10 text-xl">
    <p>Loading schedule...</p>
  </div>
  
  <!-- Day Navigation -->
  <div *ngIf="!(matchesLoading$ | async) && availableDays.length > 0" class="mb-6">
    <div class="flex items-center justify-between mb-4">
      <button 
        (click)="goToPreviousDay()" 
        [disabled]="currentDayIndex === 0"
        class="px-4 py-2 rounded-md bg-admin-card text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-admin-hover transition-colors"
        [class.cursor-not-allowed]="currentDayIndex === 0"
      >
        ← Previous Day
      </button>
      
      <h2 class="text-2xl font-bold text-center">
        {{ formatDayHeader(currentDay) }}
        <span class="text-sm font-normal text-gray-300">
          ({{ getCurrentDayMatches().length }} {{ getCurrentDayMatches().length === 1 ? 'game' : 'games' }})
        </span>
      </h2>
      
      <button 
        (click)="goToNextDay()" 
        [disabled]="currentDayIndex === availableDays.length - 1"
        class="px-4 py-2 rounded-md bg-admin-card text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-admin-hover transition-colors"
        [class.cursor-not-allowed]="currentDayIndex === availableDays.length - 1"
      >
        Next Day →
      </button>
    </div>
    
    <!-- Day Pills -->
    <div class="flex flex-wrap gap-2 justify-center">
      <button 
        *ngFor="let day of availableDays; let i = index"
        (click)="goToDay(i)"
        [class]="i === currentDayIndex ? 
          'px-4 py-2 rounded-full bg-blue-600 text-white font-medium' : 
          'px-4 py-2 rounded-full bg-admin-card text-white hover:bg-admin-hover transition-colors'"
      >
        {{ formatDayHeader(day) }}
      </button>
    </div>
  </div>
  
  <!-- No matches found -->
  <div *ngIf="!(matchesLoading$ | async) && availableDays.length === 0" class="text-center text-white py-10 text-xl">
    <p>No matches found for the selected filters.</p>
  </div>
  
  <!-- Schedule table -->
  <div *ngIf="!(matchesLoading$ | async) && getCurrentDayMatches().length > 0" class="rounded-lg bg-admin-card">
    <!-- Desktop Table View (lg and larger) -->
    <div class="hidden lg:block overflow-x-auto rounded-lg">
      <table class="w-full border-collapse bg-admin-card text-white text-sm rounded-lg overflow-hidden">
        <thead class="bg-admin-accent sticky top-0 z-10">
          <tr>
            <th (click)="onSortChange('date')" class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap cursor-pointer hover:bg-admin-hover transition-colors">
              Date
            </th>
            <th></th>
            <th (click)="onSortChange('homeTeam')" class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap cursor-pointer hover:bg-admin-hover transition-colors">
              Home Club
            </th>
            <th></th>
            <th class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap">Score</th>
            <th></th>
            <th (click)="onSortChange('awayTeam')" class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap cursor-pointer hover:bg-admin-hover transition-colors">
              Away Club
            </th>
            <th></th>
            <th class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap">
              Details
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let match of getCurrentDayMatches()" class="border-b border-admin-accent hover:bg-admin-hover transition-colors">
            <td class="px-3 py-3 text-left font-semibold text-admin-primary whitespace-nowrap">
              {{ formatDate(match.date) }}
            </td>
            <td class="px-3 py-3 text-right">
              <a [routerLink]="['/clubs', match.homeClub?._id]" class="text-white font-medium hover:text-admin-primary transition-colors">{{ match.homeTeam }}</a>
            </td>
            <td class="px-3 py-3 text-center">
              <img [src]="getImageUrl(match.homeClub?.logoUrl)" [alt]="match.homeTeam + ' logo'" class="w-6 h-6 object-contain mx-auto rounded" (error)="onImageError($event)">
            </td>
            <td class="px-3 py-3 text-center">
              <span *ngIf="getResultClass(match, match.homeTeam) === 'win'" class="text-green-500 font-bold text-sm">W</span>
              <span *ngIf="getResultClass(match, match.homeTeam) === 'loss'" class="text-red-500 font-bold text-sm">L</span>
            </td>
            <td class="px-3 py-3 text-center">
              <span *ngIf="match.homeScore === 0 && match.awayScore === 0" class="text-gray-400 font-semibold">VS</span>
              <span *ngIf="!(match.homeScore === 0 && match.awayScore === 0)" class="font-semibold text-lg">{{ match.homeScore }} - {{ match.awayScore }}</span>
            </td>
            <td class="px-3 py-3 text-center">
              <span *ngIf="getResultClass(match, match.awayTeam) === 'win'" class="text-green-500 font-bold text-sm">W</span>
              <span *ngIf="getResultClass(match, match.awayTeam) === 'loss'" class="text-red-500 font-bold text-sm">L</span>
            </td>
            <td class="px-3 py-3 text-center">
              <img [src]="getImageUrl(match.awayClub?.logoUrl)" [alt]="match.awayTeam + ' logo'" class="w-6 h-6 object-contain mx-auto rounded" (error)="onImageError($event)">
            </td>
            <td class="px-3 py-3 text-left">
              <a [routerLink]="['/clubs', match.awayClub?._id]" class="text-white font-medium hover:text-admin-primary transition-colors">{{ match.awayTeam }}</a>
            </td>
            <td class="px-3 py-3 text-center">
              <a [routerLink]="['/match', match.id]" class="inline-block px-3 py-1.5 bg-gradient-to-r from-admin-secondary to-blue-700 text-white text-xs font-medium rounded-md transition-all duration-300 border border-blue-700 shadow-md hover:from-blue-700 hover:to-blue-800 hover:-translate-y-0.5 hover:shadow-lg active:translate-y-0 active:shadow-md">
                View Details
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Medium Screen Table View (md to lg) -->
    <div class="hidden md:block lg:hidden overflow-x-auto rounded-lg">
      <table class="w-full border-collapse bg-admin-card text-white text-sm min-w-0 rounded-lg overflow-hidden">
        <thead class="bg-admin-accent sticky top-0 z-10">
          <tr>
            <th (click)="onSortChange('date')" class="px-2 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap cursor-pointer hover:bg-admin-hover transition-colors w-24">
              Date
            </th>
            <th (click)="onSortChange('homeTeam')" class="px-2 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap cursor-pointer hover:bg-admin-hover transition-colors">
              Home
            </th>
            <th class="px-2 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap w-16">Score</th>
            <th (click)="onSortChange('awayTeam')" class="px-2 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap cursor-pointer hover:bg-admin-hover transition-colors">
              Away
            </th>
            <th class="px-2 py-3 text-center font-semibold text-xs uppercase tracking-wide  whitespace-nowrap w-20">
              Details
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let match of getCurrentDayMatches()" class="border-b border-admin-accent hover:bg-admin-hover transition-colors">
            <td class="px-2 py-3 text-center font-semibold text-admin-primary text-xs">
              <div class="whitespace-nowrap">{{ formatDateMobile(match.date) }}</div>
            </td>
            <td class="px-2 py-3 text-center">
              <div class="flex items-center justify-center space-x-1">
                <a [routerLink]="['/clubs', match.homeClub?._id]" class="text-white font-medium hover:text-admin-primary transition-colors text-xs truncate max-w-28">{{ match.homeTeam }}</a>
                <img [src]="getImageUrl(match.homeClub?.logoUrl)" [alt]="match.homeTeam + ' logo'" class="w-5 h-5 object-contain rounded" (error)="onImageError($event)">
                <span *ngIf="getResultClass(match, match.homeTeam) === 'win'" class="text-green-500 font-bold text-xs">W</span>
                <span *ngIf="getResultClass(match, match.homeTeam) === 'loss'" class="text-red-500 font-bold text-xs">L</span>
              </div>
            </td>
            <td class="px-2 py-3 text-center">
              <span *ngIf="match.homeScore === 0 && match.awayScore === 0" class="text-gray-400 font-semibold text-sm">VS</span>
              <span *ngIf="!(match.homeScore === 0 && match.awayScore === 0)" class="font-semibold text-sm">{{ match.homeScore }}-{{ match.awayScore }}</span>
            </td>
            <td class="px-2 py-3 text-center">
              <div class="flex items-center justify-center space-x-1">
                <span *ngIf="getResultClass(match, match.awayTeam) === 'win'" class="text-green-500 font-bold text-xs">W</span>
                <span *ngIf="getResultClass(match, match.awayTeam) === 'loss'" class="text-red-500 font-bold text-xs">L</span>
                <img [src]="getImageUrl(match.awayClub?.logoUrl)" [alt]="match.awayTeam + ' logo'" class="w-5 h-5 object-contain rounded" (error)="onImageError($event)">
                <a [routerLink]="['/clubs', match.awayClub?._id]" class="text-white font-medium hover:text-admin-primary transition-colors text-xs truncate max-w-28">{{ match.awayTeam }}</a>
              </div>
            </td>
            <td class="px-2 py-3 text-center">
              <a [routerLink]="['/match', match.id]" class="inline-block px-2 py-1 bg-gradient-to-r from-admin-secondary to-blue-700 text-white text-xs font-medium rounded transition-all duration-300 border border-blue-700 shadow-md hover:from-blue-700 hover:to-blue-800 hover:-translate-y-0.5 hover:shadow-lg active:translate-y-0 active:shadow-md">
                View
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Mobile Card View -->
    <div class="md:hidden space-y-3" [class.p-2]="!isPreview" [class.sm:p-4]="!isPreview">
      <div *ngFor="let match of filteredMatches" class="bg-admin-hover rounded-lg p-3 sm:p-4">
        <!-- Date Row -->
        <div class="text-center mb-3">
          <span class="text-admin-primary font-semibold text-sm">{{ formatDate(match.date) }}</span>
        </div>
        
        <!-- Teams and Score Row -->
        <div class="flex items-center justify-between mb-3 gap-2">
          <!-- Home Team -->
          <div class="flex items-center space-x-1 sm:space-x-2 flex-1 justify-end min-w-0">
            <a [routerLink]="['/clubs', match.homeClub?._id]" class="text-white font-medium hover:text-admin-primary transition-colors text-xs sm:text-sm truncate">{{ match.homeTeam }}</a>
            <img [src]="getImageUrl(match.homeClub?.logoUrl)" [alt]="match.homeTeam + ' logo'" class="w-5 h-5 sm:w-6 sm:h-6 object-contain rounded flex-shrink-0" (error)="onImageError($event)">
            <span *ngIf="getResultClass(match, match.homeTeam) === 'win'" class="text-green-500 font-bold text-xs">W</span>
            <span *ngIf="getResultClass(match, match.homeTeam) === 'loss'" class="text-red-500 font-bold text-xs">L</span>
          </div>
          
          <!-- Score -->
          <div class="mx-2 sm:mx-4 text-center flex-shrink-0">
            <span *ngIf="match.homeScore === 0 && match.awayScore === 0" class="text-gray-400 font-semibold text-xs sm:text-sm">VS</span>
            <span *ngIf="!(match.homeScore === 0 && match.awayScore === 0)" class="font-semibold text-base sm:text-lg">{{ match.homeScore }} - {{ match.awayScore }}</span>
          </div>
          
          <!-- Away Team -->
          <div class="flex items-center space-x-1 sm:space-x-2 flex-1 justify-start min-w-0">
            <span *ngIf="getResultClass(match, match.awayTeam) === 'win'" class="text-green-500 font-bold text-xs">W</span>
            <span *ngIf="getResultClass(match, match.awayTeam) === 'loss'" class="text-red-500 font-bold text-xs">L</span>
            <img [src]="getImageUrl(match.awayClub?.logoUrl)" [alt]="match.awayTeam + ' logo'" class="w-5 h-5 sm:w-6 sm:h-6 object-contain rounded flex-shrink-0" (error)="onImageError($event)">
            <a [routerLink]="['/clubs', match.awayClub?._id]" class="text-white font-medium hover:text-admin-primary transition-colors text-xs sm:text-sm truncate">{{ match.awayTeam }}</a>
          </div>
        </div>
        
        <!-- Details Button -->
        <div class="text-center">
          <a [routerLink]="['/match', match.id]" class="inline-block px-3 sm:px-4 py-2 bg-gradient-to-r from-admin-secondary to-blue-700 text-white text-xs font-medium rounded-md transition-all duration-300 border border-blue-700 shadow-md hover:from-blue-700 hover:to-blue-800 hover:-translate-y-0.5 hover:shadow-lg active:translate-y-0 active:shadow-md">
            View Details
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- No matches message -->
  <div *ngIf="!(matchesLoading$ | async) && filteredMatches.length === 0" class="text-center text-gray-300 py-10 text-lg">
    <p>No matches found for the selected filters.</p>
  </div>
  
  <!-- View Full Schedule Link (Preview Mode) -->
  <div *ngIf="isPreview && filteredMatches.length > 0" class="text-center mt-6">
    <a routerLink="/schedule" class="inline-block px-6 py-3 bg-admin-secondary text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">View Full Schedule</a>
  </div>
  
  <!-- Legend -->
  <div *ngIf="!isPreview" class="bg-admin-card rounded-lg p-4 mt-5 text-sm">
    <div class="mb-2">
      <span class="text-green-500 font-bold">W</span> - Win
      <span class="text-red-500 font-bold ml-4">L</span> - Loss
    </div>
    <div class="text-gray-300 text-xs space-y-1">
      <p>* Use the filters above to view games by season and/or team</p>
      <p>* Click on column headers to sort</p>
      <p>* Click "View Details" to see match statistics</p>
    </div>
  </div>
</div>
