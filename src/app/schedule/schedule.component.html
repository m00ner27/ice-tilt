<div class="p-5 max-w-7xl mx-auto text-white">
  <h1 *ngIf="!isPreview" class="text-center mb-5 text-4xl font-bold">Game Schedule</h1>
  
  <!-- Filter options -->
  <div *ngIf="!isPreview" class="mb-5 flex flex-wrap justify-start gap-4">
    <div class="flex items-center gap-2">
      <label for="seasonFilter" class="font-medium whitespace-nowrap">Filter by Season:</label>
      <select 
        id="seasonFilter" 
        [(ngModel)]="filterSeason" 
        (change)="onSeasonFilterChange(filterSeason)" 
        class="px-3 py-2 rounded-md bg-admin-card border border-admin-accent text-white min-w-36 appearance-none cursor-pointer bg-no-repeat bg-right-2 bg-center pr-8"
        style="background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'white\'%3e%3cpath d=\'M7 10l5 5 5-5z\'/%3e%3c/svg%3e');"
      >
        <option value="">All Seasons</option>
        <option *ngFor="let season of seasons" [value]="season._id">{{ season.name }}</option>
      </select>
    </div>
    
    <div class="flex items-center gap-2">
      <label for="teamFilter" class="font-medium whitespace-nowrap">Filter by Club:</label>
      <select 
        id="teamFilter" 
        [(ngModel)]="filterTeam" 
        (change)="onTeamFilterChange(filterTeam)" 
        class="px-3 py-2 rounded-md bg-admin-card border border-admin-accent text-white min-w-36 appearance-none cursor-pointer bg-no-repeat bg-right-2 bg-center pr-8"
        style="background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 24 24\' fill=\'white\'%3e%3cpath d=\'M7 10l5 5 5-5z\'/%3e%3c/svg%3e');"
      >
        <option value="">All Clubs</option>
        <option *ngFor="let team of teamOptions" [value]="team">{{ team }}</option>
      </select>
    </div>
    
    <div class="flex items-center">
      <button 
        (click)="clearAllFilters()" 
        class="px-4 py-2 rounded-md bg-red-600 border border-red-700 text-white cursor-pointer font-medium transition-all duration-300 hover:bg-red-700 hover:-translate-y-0.5 hover:shadow-lg active:translate-y-0 active:shadow-md"
        type="button"
      >
        Clear All Filters
      </button>
    </div>
  </div>
  
  <!-- Loading state -->
  <div *ngIf="matchesLoading$ | async" class="text-center text-white py-10 text-xl">
    <p>Loading schedule...</p>
  </div>
  
  <!-- Schedule table -->
  <div *ngIf="!(matchesLoading$ | async) && filteredMatches.length > 0" class="overflow-x-auto rounded-lg border border-admin-accent bg-admin-card">
    <table class="w-full border-collapse bg-admin-card text-white text-sm min-w-96">
      <thead class="bg-admin-accent sticky top-0 z-10">
        <tr>
          <th (click)="onSortChange('date')" class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide border-b-2 border-admin-primary whitespace-nowrap cursor-pointer hover:bg-admin-hover transition-colors">
            Date
          </th>
          <th></th>
          <th (click)="onSortChange('homeTeam')" class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide border-b-2 border-admin-primary whitespace-nowrap cursor-pointer hover:bg-admin-hover transition-colors">
            <span class="hidden md:inline">Home Club</span>
            <span class="md:hidden">Home</span>
          </th>
          <th></th>
          <th class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide border-b-2 border-admin-primary whitespace-nowrap">Score</th>
          <th></th>
          <th (click)="onSortChange('awayTeam')" class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide border-b-2 border-admin-primary whitespace-nowrap cursor-pointer hover:bg-admin-hover transition-colors">
            <span class="hidden md:inline">Away Club</span>
            <span class="md:hidden">Away</span>
          </th>
          <th></th>
          <th class="px-3 py-3 text-center font-semibold text-xs uppercase tracking-wide border-b-2 border-admin-primary whitespace-nowrap">
            <span class="hidden md:inline">Details</span>
            <span class="md:hidden">View</span>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let match of filteredMatches" class="border-b border-admin-accent hover:bg-admin-hover transition-colors">
          <td class="px-3 py-3 text-left font-semibold text-admin-primary whitespace-nowrap">
            <span class="hidden md:inline">{{ formatDate(match.date) }}</span>
            <span class="md:hidden">{{ formatDateMobile(match.date) }}</span>
          </td>
          <td class="px-3 py-3 text-right">
            <a [routerLink]="['/clubs', match.homeClub?._id]" class="text-white font-medium hover:text-admin-primary transition-colors">{{ match.homeTeam }}</a>
          </td>
          <td class="px-3 py-3 text-center">
            <img [src]="getImageUrl(match.homeClub?.logoUrl)" [alt]="match.homeTeam + ' logo'" class="w-6 h-6 object-contain mx-auto rounded">
          </td>
          <td class="px-3 py-3 text-center">
            <span *ngIf="getResultClass(match, match.homeTeam) === 'win'" class="text-green-500 font-bold text-sm">W</span>
            <span *ngIf="getResultClass(match, match.homeTeam) === 'loss'" class="text-red-500 font-bold text-sm">L</span>
          </td>
          <td class="px-3 py-3 text-center">
            <span *ngIf="match.homeScore === 0 && match.awayScore === 0" class="text-gray-400 font-semibold">VS</span>
            <span *ngIf="!(match.homeScore === 0 && match.awayScore === 0)" class="font-semibold text-lg">{{ match.homeScore }} - {{ match.awayScore }}</span>
          </td>
          <td class="px-3 py-3 text-center">
            <span *ngIf="getResultClass(match, match.awayTeam) === 'win'" class="text-green-500 font-bold text-sm">W</span>
            <span *ngIf="getResultClass(match, match.awayTeam) === 'loss'" class="text-red-500 font-bold text-sm">L</span>
          </td>
          <td class="px-3 py-3 text-center">
            <img [src]="getImageUrl(match.awayClub?.logoUrl)" [alt]="match.awayTeam + ' logo'" class="w-6 h-6 object-contain mx-auto rounded">
          </td>
          <td class="px-3 py-3 text-left">
            <a [routerLink]="['/clubs', match.awayClub?._id]" class="text-white font-medium hover:text-admin-primary transition-colors">{{ match.awayTeam }}</a>
          </td>
          <td class="px-3 py-3 text-center">
            <a [routerLink]="['/match', match.id]" class="inline-block px-3 py-1.5 bg-gradient-to-r from-admin-secondary to-blue-700 text-white text-xs font-medium rounded-md transition-all duration-300 border border-blue-700 shadow-md hover:from-blue-700 hover:to-blue-800 hover:-translate-y-0.5 hover:shadow-lg active:translate-y-0 active:shadow-md">
              <span class="hidden md:inline">View Details</span>
              <span class="md:hidden">View</span>
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <!-- No matches message -->
  <div *ngIf="!(matchesLoading$ | async) && filteredMatches.length === 0" class="text-center text-gray-300 py-10 text-lg">
    <p>No matches found for the selected filters.</p>
  </div>
  
  <!-- View Full Schedule Link (Preview Mode) -->
  <div *ngIf="isPreview && filteredMatches.length > 0" class="text-center mt-6">
    <a routerLink="/schedule" class="inline-block px-6 py-3 bg-admin-secondary text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">View Full Schedule</a>
  </div>
  
  <!-- Legend -->
  <div *ngIf="!isPreview" class="bg-admin-card border border-admin-accent rounded-lg p-4 mt-5 text-sm">
    <div class="mb-2">
      <span class="text-green-500 font-bold">W</span> - Win
      <span class="text-red-500 font-bold ml-4">L</span> - Loss
    </div>
    <div class="text-gray-300 text-xs space-y-1">
      <p>* Use the filters above to view games by season and/or team</p>
      <p>* Click on column headers to sort</p>
      <p>* Click "View Details" to see match statistics</p>
    </div>
  </div>
</div>
