<section class="players-section mt-4">
  <div class="container">
    <h2 class="text-center mb-4">Players Directory</h2>
    
    <!-- Error message -->
    <div *ngIf="error" class="alert alert-danger">
      {{ error }}
    </div>

    <div class="players-container">
      <!-- Filters -->
      <div class="filters">
        <div class="search-box">
          <input 
            type="text" 
            [(ngModel)]="searchTerm"
            (input)="onSearchChange($event)"
            placeholder="Search by name or gamertag..."
            class="search-input"
          >
        </div>

        <div class="filter-buttons">
          <!-- Status Filters -->
          <div class="status-filters">
            <button 
              [class.active]="statusFilter === 'All'"
              (click)="onStatusFilterChange('All')"
            >All</button>
            <button 
              [class.active]="statusFilter === 'Free Agent'"
              (click)="onStatusFilterChange('Free Agent')"
            >Free Agents</button>
            <button 
              [class.active]="statusFilter === 'Signed'"
              (click)="onStatusFilterChange('Signed')"
            >Signed</button>
            <button 
              [class.active]="statusFilter === 'Pending'"
              (click)="onStatusFilterChange('Pending')"
            >Pending</button>
          </div>

          <!-- Position Filters -->
          <div class="position-filters">
            <button 
              [class.active]="positionFilter === 'All'"
              (click)="onPositionFilterChange('All')"
            >All Positions</button>
            <button 
              [class.active]="positionFilter === 'Forward'"
              (click)="onPositionFilterChange('Forward')"
            >Forwards</button>
            <button 
              [class.active]="positionFilter === 'Defense'"
              (click)="onPositionFilterChange('Defense')"
            >Defense</button>
            <button 
              [class.active]="positionFilter === 'Goalie'"
              (click)="onPositionFilterChange('Goalie')"
            >Goalies</button>
          </div>

          <!-- Region Filters -->
          <div class="region-filters">
            <button 
              [class.active]="regionFilter === 'All'"
              (click)="onRegionFilterChange('All')"
            >All Regions</button>
            <button 
              [class.active]="regionFilter === 'North America'"
              (click)="onRegionFilterChange('North America')"
            >North America</button>
            <button 
              [class.active]="regionFilter === 'Europe'"
              (click)="onRegionFilterChange('Europe')"
            >Europe</button>
          </div>

          <!-- Season Filter -->
          <div class="season-filter">
            <label for="seasonSelect">Season:</label>
            <select 
              id="seasonSelect" 
              [(ngModel)]="seasonFilter" 
              (change)="onSeasonFilterChange(seasonFilter)"
              class="season-select"
            >
              <option *ngFor="let season of seasons" [value]="season.name">{{ season.name }}</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Players List -->
      <div class="players-list">
        <div class="player-card" *ngFor="let player of filteredPlayers">
          <div class="player-info">
            <h3>
              <img *ngIf="player.clubLogo" [src]="player.clubLogo" [alt]="player.currentClubName" class="team-logo-sm" style="margin-right: 10px;">
              {{player.discordUsername}}<span *ngIf="player.number"> {{player.number}}</span>
            </h3>
            <div class="position">
              <app-position-pill [position]="player.position"></app-position-pill>
            </div>
            <p class="status" [ngClass]="player.status.toLowerCase().replace(' ', '-')">{{player.status}}</p>
            <p class="details">
              <span *ngIf="player.country">{{ countryEmojiMap[player.country] }} {{player.country}} â€¢ </span>
              <span>{{player.handedness}} Shot</span>
            </p>
            <p class="gaming-ids">
              <span *ngIf="player.psnId">
                <img src="assets/images/playstation-logo.svg" alt="PlayStation" class="platform-logo-sm">
                PSN: {{player.psnId}}
              </span>
              <span *ngIf="player.xboxGamertag">
                <img src="assets/images/xbox-logo.svg" alt="Xbox" class="platform-logo-sm">
                Xbox: {{player.xboxGamertag}}
              </span>
              <span *ngIf="player.gamertag && !player.psnId && !player.xboxGamertag">
                Gamertag: {{player.gamertag}}
              </span>
            </p>
          </div>
          <div class="action-buttons">
            <a [routerLink]="['/players', player.id]" class="view-profile">View Profile</a>
          </div>
        </div>

        <!-- No results message -->
        <div class="no-results" *ngIf="filteredPlayers.length === 0">
          No players found matching your criteria
        </div>
      </div>
    </div>
  </div>
</section> 